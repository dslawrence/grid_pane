window.touchpanes=[];window.touchpane_run_needed=0;
(function(g){g.fn.touchpane=function(p){var c=this;c.meta={};var a=c.meta;c.grid_active=!1;a.gutter_percentage=0.1;a.default_font=12;a.font_factor=28;a.base_width_units=12;a.width_units=a.base_width_units;a.base_height_units=10;a.height_units=a.base_height_units;a.dimension_sets=["m",""];a.dimension_sets_auto=1;a.vertical_center=1;a.show_gutter=1;a.pre_calculations=function(){};a.post_calculations=function(){};a.pre_render=function(){};a.post_render=function(){};a.phone_enabled=!0;a.tablet_enabled=
!0;a.big_enabled=!0;a.minimum_height_ratio=0.8;a.maximum_height_ratio=1.14;c.expressions={font:/font([\.\d]+)/,size:/([\.\d]+p*)x([p*\.\d]+p*)/,zoom:/^zoom([\.\d]+)/,x_gutter:/x_gutter(_*\w*)/,y_gutter:/y_gutter(_*\w*)/,overflow_left:/overflow_left(_*\w*)/,overflow_right:/overflow_right(_*\w*)/,vertical_center:/vertical_center(_*\w*)/,visible:/visible(_*\w*)/,newline:/newline(_*\w*)/};if(p)for(var q in a)void 0!=p[q]&&(a[q]=p[q]);c.f={};g("body").append('<div id="gp_pane_clone_space" style="width:98%;height:98%;position:absolute;top:0px;left:0px;"></div>');
var m=g("#gp_pane_clone_space");c.html('<div class="gp_pane_centering" class="centering_pane">'+c.html()+"</div>");c.find(".gp_pane_centering");c.grid_off=function(){c.grid_active&&(g("#grid_show").remove(),c.grid_active=!1)};c.grid_on=function(){c.grid_active&&g("#grid_show").remove();for(var d="",b=1,e=0;400>e;e++)0==b%a.width_units?(d+='<div class="grid_block no_right_margin" style="border:1px solid red;float:left;">'+b+"</div>",d+="<br clear='all'/>",b=0):d+='<div class="grid_block right_margin" style="border:1px solid red;float:left;">'+
b+"</div>",b++;g("body").append('<div id="grid_show" style="position:absolute;z-index:9999;top:0;left:0;overflow:hidden;opacity:0.2;border:1px solid blue;">'+d+"</div>");d=c.offset();g("#grid_show").width(a.width);g("#grid_show").height(a.height);g("#grid_show").offset(d);g(".grid_block").css({width:a.block_width-2,height:a.block_height-2,"margin-right":a.block_gutter,"margin-bottom":a.block_gutter});g(".no_right_margin").css({"margin-right":0});c.grid_active=!0};c.run=function(){a.width=c.width();
a.height=c.height();a.set_id="";a.fallback_set_id="";a.dimension_sets_auto&&(a.dimension_sets=[""],a.size="normal",a.width_units=a.base_width_units,a.phone_enabled&&481>a.width?(a.dimension_sets=["","p"],a.size="phone",a.width_units=Math.round(0.5*a.base_width_units)):a.tablet_enabled&&768>a.width?(a.dimension_sets=["","t"],a.size="tablet",a.width_units=Math.round(0.7*a.base_width_units)):a.big_enabled&&1199<a.width&&(a.dimension_sets=["","b"],a.size="big",a.width_units=Math.round(1.5*a.base_width_units)));
a.pre_calculations(c);a.block_height=a.height/a.height_units;a.block_width=a.width/a.width_units;a.height_ratio=a.block_height/a.block_width;0<a.minimum_height_ratio&&a.height_ratio<a.minimum_height_ratio&&(a.block_height=a.block_width*a.minimum_height_ratio,a.height_ratio=a.height/a.width);0<a.maximum_height_ratio&&a.height_ratio>a.maximum_height_ratio&&(a.block_height=a.block_width*a.maximum_height_ratio,a.height_ratio=a.height/a.width);a.block_gutter=a.block_width*a.gutter_percentage;a.block_width=
Math.round(a.block_width-a.block_gutter+a.block_gutter/a.width_units);Math.floor(a.block_width*a.width_units+a.block_gutter*(a.width_units-1))>c.width()&&(a.block_width-=1);a.block_height=Math.round(a.block_height-a.block_gutter+a.block_gutter/a.height_units);a.block_right_half_gutter=Math.round(a.block_gutter/2);a.block_gutter=Math.floor(a.block_gutter);a.block_left_half_gutter=a.block_gutter-a.block_right_half_gutter;a.default_font_setting=Math.round(a.default_font*a.block_height/a.font_factor);
a.actual_width=a.block_width*a.width_units+a.block_gutter*(a.width_units-1);var d=a.width-a.actual_width;a.pane_horizontal_border=Math.floor(d/2);a.actual_height=a.block_height*a.height_units+a.block_gutter*(a.height_units-1);d=a.height-a.actual_height;a.pane_vertical_border=Math.floor(d/2);a.dimension_set_finders=[];for(var b=0;b<a.dimension_sets.length;b++){var e=a.dimension_sets[b];""!=e&&(e+=".");a.dimension_set_finders[b]=e}c.meta.post_calculations(c);c.meta.pre_render(c);f=c.f;for(var j in c.expressions)f[j]=
[];f.all=[];var p=function(b,e){var d={target:g(b)};if(b.className&&b.className.match(/gpbox/)){for(var j=b.className.split(" "),m=[],r=0;r<a.dimension_set_finders.length;r++){0<r&&(j=m);var q={},h;for(h in c.expressions)q[h]=1;for(var s=0;s<j.length;s++){var k=j[s];if("gpbox"!=k){var l=k.substring(0,2),u=k.substring(2,1),t=a.dimension_set_finders[r];if(""==t&&"."==u)m.push(j[s]);else if(""==t||l==t){""!=t&&(k=k.substring(2,k.length));for(var n in q)if(l=k.match(c.expressions[n])){l.shift();k={target:b,
data:l};"font"!=n&&("size"!=n&&"zoom"!=n)&&"_off"!=l[0]&&(l[0]=1);f[n].push(k);if(1<l.length){if("size"==n)for(h=0;2>h;h++)(k=l[h].match(/([\\.\d]+)p/))&&k[1]&&(l[h]=e.size[h]?Math.floor(e.size[h]*k[1]):Math.floor(a.width_unit*k[1]));d[n]=l}else d[n]=l[0];break}}}}}for(h in e)if(void 0==d[h]&&("font"==h||"size"==h))d[h]=e[h];f.all.push(d)}g(b).children("*").each(function(){p(this,d)})};c.children("*").each(function(){p(this,{})});g(".gprow").css({height:a.block_gutter});for(j=0;j<f.all.length;j++){b=
f.all[j];e={};b.zoom&&(b.size[0]*=b.zoom,b.size[1]*=b.zoom,b.font*=b.zoom);void 0!=b.visible&&("_off"==b.visible?b.target.hide():b.target.show());b.size&&(e.width=Math.floor(b.size[0]*c.meta.block_width+c.meta.block_gutter*(b.size[0]-1)),e.height=Math.floor(b.size[1]*c.meta.block_height+(b.size[1]-1)*c.meta.block_gutter));b.overflow_right&&"_off"!=b.overflow_right&&(e.width+=a.block_right_half_gutter);b.overflow_left&&"_off"!=b.overflow_left&&(e.width+=a.block_left_half_gutter);e["font-size"]=b.font?
Math.round(b.font*a.block_height/a.font_factor):a.default_font_setting;1==b.newline&&(e.clear="both");if(a.show_gutter&&"_off"==b.x_gutter||b.overflow_right&&"_off"!=b.overflow_right)e["margin-right"]="0";else if(a.show_gutter||"_off"!=b.x_gutter)e["margin-right"]=a.block_gutter;if(a.show_gutter&&"_off"==b.y_gutter)e["margin-bottom"]="0";else if(a.show_gutter||"off"!=b.y_gutter)e["margin-bottom"]=a.block_gutter;b.target.css(e)}for(j=0;j<f.all.length;j++)if(b=f.all[j],void 0==b.visible||"_off"!=b.visible)if(a.vertical_center&&
"_off"!=b.vertical_center||"_off"!=b.vertical_center)(d=b.target.html())||(d="9"),e=b.target.height(),b.target.width(),m.html(b.target.clone()),m.find(":first").html('<div class="the_aligner" style="position:relative;">'+d+'<div style="clear:both;"></div></div>'),m.show(),d=g(".the_aligner").height(),m.hide(),d=Math.floor((e-d)/2),0<d&&b.target.css({"padding-top":d,height:e-d});c.meta.post_render(c)};m.html("");window.touchpanes.push(c);c.run();return c}})(jQuery);
$(function(){setInterval(function(){window.touchpane_run_needed&&(run_all_touchpanes(),window.touchpane_run_needed=0)},100);$(window).bind("orientationchange resize",function(){window.touchpane_run_needed=1})});function run_all_touchpanes(){for(var g=0;g<window.touchpanes.length;g++)window.touchpanes[g].run()};
